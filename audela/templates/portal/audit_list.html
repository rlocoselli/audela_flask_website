{% extends "portal/layout.html" %}
{% set title = "Auditoria" %}

{% block portal_content %}
  <div class="box">
    <h3>Eventos (Ãºltimos 200)</h3>
    {% if not events %}
      <p>Sem eventos ainda.</p>
    {% else %}
      <div style="overflow-x:auto;">
        <table class="table">
          <thead>
            <tr>
              <th>Quando</th>
              <th>Tipo</th>
              <th>User ID</th>
              <th>Payload</th>
            </tr>
          </thead>
          <tbody>
            {% for e in events %}
              <tr>
                <td>{{ e.created_at }}</td>
                <td><code>{{ e.event_type }}</code></td>
                <td>{{ e.user_id }}</td>
                <td><pre style="white-space: pre-wrap; margin:0;">{{ e.payload_json | tojson(indent=0) }}</pre></td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% endif %}
  </div>
{% endblock %}
