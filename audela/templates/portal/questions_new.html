{% extends "portal/layout.html" %}
{% set title = "Nova pergunta" %}

{% block portal_content %}
  <div class="box">
    <form method="post">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

      <div class="row gtr-uniform gtr-50">
        <div class="col-12">
          <label>Nome</label>
          <input type="text" name="name" required />
        </div>
        <div class="col-12">
          <label>Fonte</label>
          <select name="source_id" required>
            <option value="">-- selecione --</option>
            {% for s in sources %}
              <option value="{{ s.id }}">{{ s.name }} ({{ s.type }})</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-12">
          <label>SQL</label>
          <textarea name="sql_text" rows="10" required></textarea>
          <p style="margin: .4em 0 0 0; font-size: .9em;">Somente leitura. Se a fonte exigir tenant, inclua <code>:tenant_id</code>.</p>
        </div>
        <div class="col-12">
          <button class="button primary" type="submit">Salvar</button>
          <a class="button" href="{{ url_for('portal.questions_list') }}">Cancelar</a>
        </div>
      </div>
    </form>
  </div>
{% endblock %}
