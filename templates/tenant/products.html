{% extends "portal/base_portal.html" %}

{% block title %}{{ _('Mes produits') }} – {{ tenant.name }}{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-10">
      <div class="mb-3">
        <a href="{{ url_for('tenant.dashboard') }}" class="btn btn-outline-secondary btn-sm">
          <i class="bi bi-arrow-left"></i> {{ _('Retour au dashboard') }}
        </a>
      </div>

      <h1 class="h3 mb-4">
        <i class="bi bi-box-seam"></i> {{ _('Mes produits') }}
      </h1>

      <div class="row g-4">
        {% if has_finance %}
        <!-- Finance Product -->
        <div class="col-md-6">
          <div class="card border-0 shadow-sm h-100">
            <div class="card-body p-4">
              <div class="d-flex align-items-center mb-3">
                <div class="bg-success bg-opacity-10 rounded-circle p-3 me-3">
                  <i class="bi bi-cash-coin text-success" style="font-size: 2rem;"></i>
                </div>
                <div>
                  <h4 class="mb-0">AUDELA Finance</h4>
                  <span class="badge bg-success">{{ _('Actif') }}</span>
                </div>
              </div>

              <p class="text-muted mb-4">
                {{ _('Gestion financière complète avec synchronisation bancaire, calcul LCR/NSFR, et rapports réglementaires.') }}
              </p>

              <h6 class="mb-3">{{ _('Fonctionnalités incluses:') }}</h6>
              <ul class="list-unstyled mb-4">
                <li class="mb-2">
                  <i class="bi bi-check-circle text-success"></i> {{ _('Synchronisation bancaire Powens/Tink') }}
                </li>
                <li class="mb-2">
                  <i class="bi bi-check-circle text-success"></i> {{ _('Calcul automatique LCR et NSFR') }}
                </li>
                <li class="mb-2">
                  <i class="bi bi-check-circle text-success"></i> {{ _('Gestion des transactions') }}
                </li>
                <li class="mb-2">
                  <i class="bi bi-check-circle text-success"></i> {{ _('Rapports et exports') }}
                </li>
                <li class="mb-2">
                  <i class="bi bi-check-circle text-success"></i> {{ _('Catégorisation automatique') }}
                </li>
              </ul>

              <a href="{{ url_for('finance.dashboard') }}" class="btn btn-success w-100">
                <i class="bi bi-box-arrow-up-right"></i> {{ _('Accéder à Finance') }}
              </a>
            </div>
          </div>
        </div>
        {% endif %}

        {% if has_bi %}
        <!-- BI Product -->
        <div class="col-md-6">
          <div class="card border-0 shadow-sm h-100">
            <div class="card-body p-4">
              <div class="d-flex align-items-center mb-3">
                <div class="bg-info bg-opacity-10 rounded-circle p-3 me-3">
                  <i class="bi bi-graph-up text-info" style="font-size: 2rem;"></i>
                </div>
                <div>
                  <h4 class="mb-0">AUDELA BI</h4>
                  <span class="badge bg-info">{{ _('Actif') }}</span>
                </div>
              </div>

              <p class="text-muted mb-4">
                {{ _('Business Intelligence avec tableaux de bord interactifs, analyses avancées et requêtes SQL personnalisées.') }}
              </p>

              <h6 class="mb-3">{{ _('Fonctionnalités incluses:') }}</h6>
              <ul class="list-unstyled mb-4">
                <li class="mb-2">
                  <i class="bi bi-check-circle text-info"></i> {{ _('Tableaux de bord personnalisables') }}
                </li>
                <li class="mb-2">
                  <i class="bi bi-check-circle text-info"></i> {{ _('Requêtes SQL interactives') }}
                </li>
                <li class="mb-2">
                  <i class="bi bi-check-circle text-info"></i> {{ _('Connexion multi-sources de données') }}
                </li>
                <li class="mb-2">
                  <i class="bi bi-check-circle text-info"></i> {{ _('Graphiques et visualisations') }}
                </li>
                <li class="mb-2">
                  <i class="bi bi-check-circle text-info"></i> {{ _('Rapports automatisés') }}
                </li>
              </ul>

              <a href="{{ url_for('portal.home') }}" class="btn btn-info w-100">
                <i class="bi bi-box-arrow-up-right"></i> {{ _('Accéder à BI') }}
              </a>
            </div>
          </div>
        </div>
        {% endif %}

        {% if not has_finance and not has_bi %}
        <!-- No Products -->
        <div class="col-12">
          <div class="card border-0 shadow-sm">
            <div class="card-body text-center py-5">
              <i class="bi bi-box-seam" style="font-size: 4rem; opacity: 0.2;"></i>
              <h4 class="mt-3 mb-2">{{ _('Aucun produit actif') }}</h4>
              <p class="text-muted mb-4">
                {{ _('Abonnez-vous à Finance ou BI pour accéder aux fonctionnalités complètes d\'AUDELA') }}
              </p>
              <a href="{{ url_for('billing.plans') }}" class="btn btn-primary btn-lg">
                <i class="bi bi-rocket"></i> {{ _('Voir les plans disponibles') }}
              </a>
            </div>
          </div>
        </div>
        {% endif %}
      </div>

      {% if has_finance or has_bi %}
      <!-- Upgrade Suggestion -->
      <div class="card border-0 shadow-sm mt-4 bg-light">
        <div class="card-body p-4">
          <div class="row align-items-center">
            <div class="col-md-8">
              <h5 class="mb-2">
                <i class="bi bi-star"></i> {{ _('Envie d\'aller plus loin?') }}
              </h5>
              <p class="text-muted mb-0">
                {% if has_finance and not has_bi %}
                  {{ _('Ajoutez le module BI pour une analyse complète de vos données') }}
                {% elif has_bi and not has_finance %}
                  {{ _('Ajoutez le module Finance pour une gestion financière complète') }}
                {% else %}
                  {{ _('Passez au plan Enterprise pour des fonctionnalités illimitées') }}
                {% endif %}
              </p>
            </div>
            <div class="col-md-4 text-md-end mt-3 mt-md-0">
              <a href="{{ url_for('billing.plans') }}" class="btn btn-primary">
                <i class="bi bi-arrow-up-circle"></i> {{ _('Voir les plans') }}
              </a>
            </div>
          </div>
        </div>
      </div>
      {% endif %}

    </div>
  </div>
</div>
{% endblock %}
