{% extends "finance/layout.html" %}

{% block finance_page %}
  <div class="d-flex flex-wrap align-items-center justify-content-between gap-2 mb-3">
    <div>
      <h1 class="h4 mb-1">{{ _('AUDELA Finance') }}</h1>
      <div class="text-secondary small">
        {{ _('Empresa') }}: <span class="fw-semibold">{{ company.name if company else '' }}</span>
        <a class="ms-2" href="{{ url_for('finance.companies') }}">{{ _('Mudar') }}</a>
      </div>
    </div>

    <div class="d-flex align-items-center gap-2">
      {% if transaction_usage %}
        <span class="badge text-bg-light border">
          {{ _('Transações do mês') }}: {{ transaction_usage.current }}/{{ transaction_usage.max_label }}
        </span>
      {% endif %}

      <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('finance.accounts_list') }}">
        <i class="bi bi-journal-text me-1"></i>{{ _('Contas') }}
      </a>
      <div class="dropdown">
        <button class="btn btn-primary btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-plus-lg me-1"></i>{{ _('Nova transação') }}
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
          <li>
            <a class="dropdown-item" href="{{ url_for('finance.transaction_new') }}">
              <i class="bi bi-pencil-square me-2"></i>{{ _('Transação completa') }}
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="{{ url_for('finance.quick_entry') }}">
              <i class="bi bi-lightning-charge me-2"></i>{{ _('Entrada rápida') }}
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="{{ url_for('finance.recurring_list') }}">
              <i class="bi bi-arrow-repeat me-2"></i>{{ _('Recorrentes') }}
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="{{ url_for('finance.liabilities_list') }}">
              <i class="bi bi-bank2 me-2"></i>{{ _('Financiamentos') }}
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="{{ url_for('finance.investments_list') }}">
              <i class="bi bi-graph-up me-2"></i>{{ _('Investimentos') }}
            </a>
          </li>
          <li><hr class="dropdown-divider" /></li>
          <li>
            <a class="dropdown-item" href="{{ url_for('finance.reports_transactions') }}">
              <i class="bi bi-graph-up-arrow me-2"></i>{{ _('Relatórios') }}
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="{{ url_for('finance.reports_statistics') }}">
              <i class="bi bi-bar-chart-line me-2"></i>{{ _('Statistiques') }}
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="{{ url_for('finance.reports_accounting') }}">
              <i class="bi bi-journal-check me-2"></i>{{ _('Rapport comptable') }}
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <ul class="nav nav-pills flex-wrap gap-1 mb-4">
    <li class="nav-item"><a class="nav-link {% if active=='dashboard' %}active{% endif %}" href="{{ url_for('finance.dashboard') }}">{{ _('Visão geral') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='accounts' %}active{% endif %}" href="{{ url_for('finance.accounts_list') }}">{{ _('Contas') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='transactions' %}active{% endif %}" href="{{ url_for('finance.transactions_list') }}">{{ _('Transações') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='quick_entry' %}active{% endif %}" href="{{ url_for('finance.quick_entry') }}">{{ _('Entrada rápida') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='reports' %}active{% endif %}" href="{{ url_for('finance.reports_transactions') }}">{{ _('Relatórios') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='stats' %}active{% endif %}" href="{{ url_for('finance.reports_statistics') }}">{{ _('Statistiques') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='reports' %}active{% endif %}" href="{{ url_for('finance.reports_accounting') }}">{{ _('Rapport comptable') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='pivot' %}active{% endif %}" href="{{ url_for('finance.pivot_page') }}">{{ _('Pivot') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='invoices' %}active{% endif %}" href="{{ url_for('finance.invoices_list') }}">{{ _('E-faturas') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='alerts' %}active{% endif %}" href="{{ url_for('finance.alerts_page') }}">{{ _('Alertas') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='regulation' %}active{% endif %}" href="{{ url_for('finance.regulation_page') }}">{{ _('Regulação') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='liabilities' %}active{% endif %}" href="{{ url_for('finance.liabilities_list') }}">{{ _('Financiamentos') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='investments' %}active{% endif %}" href="{{ url_for('finance.investments_list') }}">{{ _('Investimentos') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='recurring' %}active{% endif %}" href="{{ url_for('finance.recurring_list') }}">{{ _('Recorrentes') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='cashflow' %}active{% endif %}" href="{{ url_for('finance.cashflow') }}">{{ _('Cashflow') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='nii' %}active{% endif %}" href="{{ url_for('finance.nii') }}">{{ _('NII') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='gaps' %}active{% endif %}" href="{{ url_for('finance.gaps') }}">{{ _('Gaps') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='liquidity' %}active{% endif %}" href="{{ url_for('finance.liquidity') }}">{{ _('Liquidez') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='risk' %}active{% endif %}" href="{{ url_for('finance.risk') }}">{{ _('Risco') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='settings' %}active{% endif %}" href="{{ url_for('finance.settings_categories') }}">{{ _('Configurações') }}</a></li>
    <li class="nav-item"><a class="nav-link {% if active=='help' %}active{% endif %}" href="{{ url_for('finance.help_page') }}">{{ _('Ajuda') }}</a></li>
  </ul>

  {% block finance_content %}{% endblock %}
{% endblock %}
